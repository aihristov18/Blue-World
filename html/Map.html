<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Blue World Map</title>
   <link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet">
   <link rel="stylesheet" type="text/css" href="../css/Map.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
   <script src="../js/MapScripts.js"></script>
   <script src="../js/map.js"></script>
   <script src="../js/data.js"></script>
   <script>
      function giveData(element) {
         for (var i = 0; i < dataArray.length; i++) {
            if (dataArray[i].country == element) {
               getInfo(populationDataPoint, "#population", dataArray[i].populationUrl);
               getInfo(GDPSataPoint, "#GDP", dataArray[i].GDPUrl)
               getInfo(foodDataPoint, "#food", dataArray[i].FPUrl)
               getInfo(pollutionDataPoint, "#pollution", dataArray[i].FPUrl)
               $("#countryName").html(dataArray[i].name);
               $("#popSub").html("Population:");
               $("#dataDiv").css("display", "block")
            }
         }
      }
      var onMainMenu = true;
      window.onload = function () {
         document.getElementById("Map").innerHTML = Map; // Initialise the Map
         InitialiseMap(40, 24, "BG"); // Initialise The Background Triangle Grid

         //Initialise Refrences to the continents
         var MCanvas = $("#SVGRoot");
         var BGcanvas = $("#triangle");
         var asiaElements = $(".Asia");
         var europeanElements = $(".Europe");
         var americanElements = $(".America");
         var oceanianElements = $(".Oceania");
         var africanElements = $(".Africa");
         var sAmericanElements = $(".SouthAmerica");

         //Add a stroke of 4px to every continent
         asiaElements.css("stroke-width", "4px");
         europeanElements.css("stroke-width", "4px");
         americanElements.css("stroke-width", "4px");
         oceanianElements.css("stroke-width", "4px");
         africanElements.css("stroke-width", "4px");
         sAmericanElements.css("stroke-width", "4px");

         //BEGIN HOVER FUNCTIONALITY//
         //Each continent's stroke becomes white, the cursor becomes a pointer
         europeanElements.hover(function () {
            if (onMainMenu) {
               europeanElements
                  .css("stroke", "white")
                  .css("transition", "0.8s")
                  .css("cursor", "pointer")
            }
         }, function () {
            if (onMainMenu) {
               europeanElements
                  .css("stroke", "black")
                  .css("cursor", "")
            }
         });

         africanElements.hover(function () {
            if (onMainMenu) {
               africanElements
                  .css("stroke", "white")
                  .css("transition", "0.8s")
                  .css("cursor", "pointer")
            }
         }, function () {
            if (onMainMenu) {
               africanElements
                  .css("stroke", "black")
                  .css("cursor", "")
            }
         });

         sAmericanElements.hover(function () {
            if (onMainMenu) {
               sAmericanElements
                  .css("stroke", "white")
                  .css("transition", "0.8s")
                  .css("cursor", "pointer")
            }
         }, function () {
            if (onMainMenu) {
               sAmericanElements
                  .css("stroke", "black")
                  .css("cursor", "")
            }
         });

         oceanianElements.hover(function () {
            if (onMainMenu) {
               oceanianElements
                  .css("stroke", "white")
                  .css("transition", "0.8s")
                  .css("cursor", "pointer")
            }
         }, function () {
            if (onMainMenu) {
               oceanianElements
                  .css("stroke", "black")
                  .css("cursor", "")
            }
         })

         americanElements.hover(function () {
            if (onMainMenu) {
               americanElements
                  .css("stroke", "white")
                  .css("transition", "0.8s")
                  .css("cursor", "pointer")
            }
         }, function () {
            if (onMainMenu) {
               americanElements
                  .css("stroke", "black")
                  .css("cursor", "")
            }
         })

         asiaElements.hover(
            function () {
               if (onMainMenu) {
                  asiaElements
                     .css("stroke", "white")
                     .css("transition", "0.8s")
                     .css("cursor", "pointer")
               }
            },
            function () {
               if (onMainMenu) {
                  asiaElements
                     .css("stroke", "black")
                     .css("cursor", "")
               }
            }
         );


         //ASIA ZOOM IN
         asiaElements.on("click", function () {
            if (onMainMenu) {
               $("#countryName").html("");
               $("#popSub").html("");
               $("#population").html("");
               // $().on("click",function(){console.log("test");});
               onMainMenu = false;
               asiaElements
                  .css("stroke", "white")
                  .css("cursor", "")
                  .css("stroke-width", "4px")
               MCanvas
                  .attr("viewBox", "0 0 2100 1000")
                  //.css("overflow", "visible")
                  .attr("padding-right", "40%")
                  .attr("height", "5%")
                  .css("margin-left", "0%")
                  .css("transform", "scale(1.7)")
                  .css("transition", "1s")
                  .css("padding-top", "5.5%")
                  .css("padding-right", "57%");
               BGcanvas
                  .css("transform", "scale(1.7)")
                  .css("transition", "1s")
                  .attr("overflow", "hidden")
                  .css("padding-top", "5.5%")
                  .attr("viewBox", "0 0 3700 1652")
               $(".Unclear.Asia")
                  .css("fill", "#796465")
               $("#Russia").on("click", function () {
                  giveData("#Russia");
                  $("body").css("background-color", "#BDC4A7").css("transition","1s")
               })
               $("#China").css("fill", "#84322E");
               $("#India").css("fill", "#E8D2AE");
               $("#middleEast").css("fill", "#D7B29D");
               $("#Japan").css("fill", "#CB8589");
               $("#Russia").css("fill", "#BDC4A7")
            }
         });

         $("#Russia").hover(function () {
            if (onMainMenu == false)
               $("#Russia").css("fill", "#BDC4A7")
         }, function () {
            if (onMainMenu == false)
               $("#Russia").css("fill", "#BDC4A7")
         });

         //EUROPE ZOOM IN
         europeanElements.on("click", function () {
            if (onMainMenu) {
               onMainMenu = false;
               europeanElements
                  .css("stroke", "white")
                  .css("stroke-width", "3px")
               MCanvas
                  .css("transform", "scale(4)")
                  .css("padding-top", "14%")
                  .css("padding-left", "6%")
                  .attr("viewBox", "0 0 2100 820")
                  .css("overflow", "hidden")
                  .css("transition", "1s");
               BGcanvas
                  .css("transform", "scale(4)")
                  .css("transition", "1s")
                  .attr("overflow", "hidden")
                  .css("padding-top", "12%")
                  .attr("viewBox", "0 0 3700 1400")
               $(".Unclear.Europe, #Spain, #Benelux, #UkIrl").css("fill", "#9CAFB7 ");
               $("#Germany").css("fill", "#949D6A");
               $("#France").css("fill", "#ADB993");
               $("#Bulgaria").css("fill", "#D0D38F");
               $("#UK, #NIrl").css("fill", "#BFEDC1 ");
            }
         });

         //Africa Zoom in
         africanElements.on("click", function () {
            if (onMainMenu) {
               onMainMenu = false;
               africanElements.css("stroke", "white")
               MCanvas
                  .css("transform", "scale(2)")
                  .css("padding-bottom", "27%")
                  .css("overflow", "hidden")
                  .attr("viewBox", "0 0 2100 892")
                  .css("transition", "1s");
               BGcanvas
                  .css("overflow", "hidden")
                  .css("transform", "scale(2)")
                  .css("transition", "1s")
                  .attr("viewBox", "0 0 3700 1850")
            }
         });

         //S.America zoom-in
         sAmericanElements.on("click", function () {
            if (onMainMenu) {
               onMainMenu = false;
               sAmericanElements.css("stroke", "white")
               MCanvas
                  .css("transition", "1s")
                  .css("transform", "scale(2)")
                  .attr("viewBox", "0 0 2100 1100")
                  .css("margin-left", "50%")
                  .css("padding-bottom", "50%")
                  .css("overflow", "hidden")
               BGcanvas
                  .css("transition", "1s")
                  .css("overflow", "hidden")
                  .css("transform", "scale(2)")
                  .attr("viewBox", "0 100 3700 1860")
            }
         });

         //America zoom-in
         americanElements.on("click", function () {
            if (onMainMenu) {
               onMainMenu = false;
               sAmericanElements.css("stroke", "white")
               MCanvas
                  .css("overflow", "hidden")
                  .css("transition", "1s")
                  .css("transform", "scale(2)")
                  .css("padding-top", "13%")
                  .css("padding-left", "35%")
                  .css("padding-top", "10%")
                  .attr("viewBox", "0 0 2100 912")
               BGcanvas
                  .css("transition", "1s")
                  .css("overflow", "hidden")
                  .css("transform", "scale(2)")
               $(".Unclear.America, #Greenland").css("fill","#5A7684")
               $("#USA, #Alaska, #Unclear32").css("fill","#8FBDD3")
               $("#Mexico").css("fill","#7EB9C4")
               $("#Canada, #Unclear25, #Unclear26, #Unclear27, #Unclear29").css("fill","#80CED7")
            }
         });

         //Oceania zoom-in
         oceanianElements.on("click", function () {
            if (onMainMenu) {
               onMainMenu = false;
               oceanianElements.css("stroke", "white")
               MCanvas
                  .css("transition", "1s")
                  .css("overflow", "hidden")
                  .css("transform", "scale(3)")
                  .css("padding-right", "100%")
                  .css("padding-bottom", "38%")
               //.attr("viewBox","700 260 2100 1100")
               BGcanvas
                  .css("transition", "1s")
                  .css("overflow", "hidden")
                  .css("transform", "scale(3)")
            }
         });



         for (var i = 0; i < 50; i++) { AnimateWater(40, 24, "water"); }
         for (var i = 0; i < 100; i++) { AnimateWater(40, 24, "BlueWater"); }
         for (var i = 0; i < 50; i++) { AnimateWater(40, 24, "WhiteWater"); }

         setTimeout(function () {
            for (var i = 0; i < 50; i++) { AnimateWater(40, 24, "water"); }
            for (var i = 0; i < 100; i++) { AnimateWater(40, 24, "BlueWater"); }
            for (var i = 0; i < 50; i++) { AnimateWater(40, 24, "WhiteWater"); }

            setTimeout(function () {
               for (var i = 0; i < 50; i++) { AnimateWater(40, 24, "water"); }
               for (var i = 0; i < 100; i++) { AnimateWater(40, 24, "BlueWater"); }
               for (var i = 0; i < 50; i++) { AnimateWater(40, 24, "WhiteWater"); }
            }, 2000);
         }, 2000);

      }


      function zoomOut() {

         var europeanElements = $(".Europe");
         var americanElements = $(".America");
         var oceanianElements = $(".Oceania");
         var africanElements = $(".Africa");
         var sAmericanElements = $(".SouthAmerica");
         var MCanvas = $("#SVGRoot");
         var BGcanvas = $("#triangle");
         var asiaElements = $(".Asia");
         onMainMenu = true;
         asiaElements
            .css("stroke", "black")
         MCanvas
            .attr("viewBox", "0 0 2100 1100")
            //.css("overflow", "visible")
            .attr("padding-right", "")
            .attr("height", "")
            .css("margin-left", "")
            .css("transform", "scale(1)")
            .css("transition", "1s")
            .css("padding-top", "")
            .css("padding-right", "")
            .css("padding-left", "")
            .css("padding-bottom", "")
         BGcanvas
            .css("margin-top", "")
            .css("margin-bottom", "")
            .css("padding-bottom", "")
            .css("transform", "scale(1)")
            .css("transition", "1s")
            .attr("overflow", "hidden")
            .css("padding-top", "")
            .attr("viewBox", "0 0 3700 1860");
         $(".Unclear.Asia")
            .css("animation-name", "")
            .css("animation-duration", "")
            .css("animation-iteration-count", "");
         asiaElements.css("fill", "#f3be5c");
         oceanianElements.css("fill", "#f3be5c");
         africanElements.css("fill", "#f3be5c");
         americanElements.css("fill", "#f3be5c");
         sAmericanElements.css("fill", "#f3be5c");
         europeanElements.css("fill", "#f3be5c");
         asiaElements.css("stroke", "black");
         oceanianElements.css("stroke", "black");
         africanElements.css("stroke", "black");
         americanElements.css("stroke", "black");
         sAmericanElements.css("stroke", "black");
         europeanElements.css("stroke", "black");
         $("#dataDiv").css("display", "none")
         // $("#countryName").html("");
         // $("#popSub").html("");
         // $("#population").html("");
         $("body").css("background-color", "#222334")
      }

   </script>
</head>

<body>
   <div id="label"></div>
   <div id="Map"></div>
   <div id="BG" style="position: relative; overflow:hidden;"></div>
   <button style="position: absolute; z-index: 3; float:right;" onclick="zoomOut()">Zoom out</button>
   <hr style="color:white">
   <div id="dataDiv" style="display:none">
      <center>
         <p id="countryName"></p>
      </center>
      <div style="display:inline-block; margin-top:3vw;">
      <p id="popSub" class="sub">Population:</p>
      <p id="population" class="stats">Retrieving Data...</p>
      </div>
      <div style="display:inline-block; float:right; margin-top:3vw;">
      <p class="sub">Seafood Production Score:</p>
      <p id="food" class="stats">Retrieving Data...</p>
      </div>
      <div>
      <p class="sub">GDP:</p>
      <p id="GDP" class="stats">Retrieving Data...</p>
      </div>
      <div>
      <p class="sub">Pollution:</p>
      <p id="pollution" class="stats">Retrieving Data...</p>
      </div>
   </div>
</body>

</html>
</body>

</html>